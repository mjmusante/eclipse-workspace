package sequence;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Sequencer {
	
	ArrayList<Integer> array;
	
	public Sequencer() {
		array = new ArrayList<Integer>();
	}
	
	public Sequencer(List<Integer> list) {
		array = new ArrayList<Integer>();
		array.addAll(list);
	}
	
	public void add(List<Integer> ary) {
		array.addAll(ary);
	}
	
	public List<Integer> get() {
		return array;
	}
	
	public void reset() {
		array = new ArrayList<Integer>();
	}
	
	public List<Sequencer> longest() {
		List<Sequencer> result = new ArrayList<Sequencer>();
		
		if (array.size() == 0)
			return result;
	
		// int start;
		int last = array.get(0) + 1;
		List<Integer> intlist = new ArrayList<Integer>();
		for (int pos = 0; pos < array.size(); pos++) {
			int cur = array.get(pos);
			if (last < cur) {
				last = cur;
			} else {
				if (intlist.size() > 1) {
					result.add(new Sequencer(intlist));
				}
				intlist = new ArrayList<Integer>();
				last = cur;
			}
			intlist.add(cur);
		}
		if (intlist.size() > 1) {
//System.out.println("final - added");
			result.add(new Sequencer(intlist));
		}
		return result;
	}
	
	public static void main(String[] argv) {
		Sequencer foo = new Sequencer();
		
		// test 1: empty
		assert(foo.get().size() == 0);
		assert(foo.longest().size() == 0);
		System.out.println("a");		
		
		// test 2: add some entries and ensure they're there
		foo.add(Arrays.asList(1, 2, 3));
		List<Integer> bar = foo.get();
		assert(bar.get(0) == 1);
		assert(bar.get(1) == 2);
		assert(bar.get(2) == 3);
		assert(foo.longest().size() == 1);
		List<Sequencer> baz = foo.longest();
		for (Sequencer seq : baz) {
			assert(seq.get().get(0) == 1);
			assert(seq.get().get(1) == 2);
			assert(seq.get().get(2) == 3);
		}
		System.out.println("b");
		
		// test 3: add some more entries and ensure they're all in there
		foo.add(Arrays.asList(2, 3, 4));
		bar = foo.get();
		assert(bar.get(0) == 1);
		assert(bar.get(1) == 2);
		assert(bar.get(2) == 3);
		assert(bar.get(3) == 2);
		assert(bar.get(4) == 3);
		assert(bar.get(5) == 4);
		assert(foo.longest().size() == 2);
		baz = foo.longest();
		assert(baz.get(0).get().get(0) == 1);
		assert(baz.get(0).get().get(1) == 2);
		assert(baz.get(0).get().get(2) == 3);
		assert(baz.get(1).get().get(0) == 2);
		assert(baz.get(1).get().get(1) == 3);
		assert(baz.get(1).get().get(2) == 4);
		System.out.println("c");
		
	}
	

}
